{"version":3,"sources":["./src/app/admin/chart/chart.component.html","./src/app/admin/admin-routing.module.ts","./src/app/admin/admin.module.ts","./src/app/admin/chart/chart.component.scss","./src/app/admin/chart/chart.component.ts","./src/app/service/warehouse-bill/warehouse-bill.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,qsBAAsoB,aAAa,iKAAiK,eAAe,mBAAmB,iBAAiB,+D;;;;;;;;;;;;;;;;;;;;ACA70B;AACc;AACA;AACG;AAG1D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qEAAc;KAC1B;IACD;QACE,IAAI,EAAE,SAAS;QACf,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,yPAAkC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC;KAC5F;IACD;QACE,IAAI,EAAE,UAAU;QAChB,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,kNAAoC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC;KAC/F;IACD;QACE,IAAI,EAAE,WAAW;QACjB,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,yQAAsC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC;KAClG;IACD;QACE,IAAI,EAAE,gBAAgB;QACtB,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,iTAAgD,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,mBAAmB,CAAC;KAChH;IACD;QACE,IAAI,EAAE,QAAQ;QACd,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,iPAAgC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,YAAY,CAAC;KACzF;IACD;QACE,IAAI,EAAE,WAAW;QACjB,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,iRAAwC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC;KACpG;IACD;QACE,IAAI,EAAE,OAAO;QACb,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,iOAA4B,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC;KACnF;IACD;QACE,IAAI,EAAE,OAAO;QACb,gBAAgB,EAAE,CAAC,uEAAc,CAAC;QAClC,YAAY,EAAE,GAAG,EAAE,CAAC,iOAA4B,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC;KACnF;CACF,CAAC;AAMF,IAAa,kBAAkB,GAA/B,MAAa,kBAAkB;CAAI;AAAtB,kBAAkB;IAJ9B,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,kBAAkB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;ACzDU;AACM;AAEa;AACL;AAYvD,IAAa,WAAW,GAAxB,MAAa,WAAW;CAAI;AAAf,WAAW;IATvB,8DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,qEAAc;SACf;QACD,OAAO,EAAE;YACP,4DAAY;YACZ,wEAAkB;SACnB;KACF,CAAC;GACW,WAAW,CAAI;AAAJ;;;;;;;;;;;;;AChBxB;AAAe,6GAA8C,mJ;;;;;;;;;;;;;;;;;;;ACAb;AACiB;AACwB;AAUzF,IAAa,cAAc,GAA3B,MAAa,cAAc;IAGzB,YAAoB,aAA4B,EAC5B,oBAA0C;QAD1C,kBAAa,GAAb,aAAa,CAAe;QAC5B,yBAAoB,GAApB,oBAAoB,CAAsB;IAC9D,CAAC;IAEK,QAAQ;;YACZ,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;YAC5C,IAAI,gBAAgB,GAAG,EAAE,CAAC;YAC1B,IAAI,aAAa,GAAG,EAAE,CAAC;YACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;gBAC3B,IAAI,kBAAkB,GAAG,MAAM,IAAI,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;gBACrF,IAAI,eAAe,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC/E,IAAI,kBAAkB,IAAI,IAAI,EAAE;oBAC9B,kBAAkB,GAAG,CAAC,CAAC;iBACxB;gBACD,IAAI,eAAe,IAAI,IAAI,EAAE;oBAC3B,eAAe,GAAG,CAAC,CAAC;iBACrB;gBACD,gBAAgB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBAC1C,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;aACrC;YACD,IAAI,aAAa,GAAG;gBAClB,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS;oBAC7F,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE;gBACjD,QAAQ,EAAE;oBACR;wBACE,KAAK,EAAE,KAAK;wBACZ,eAAe,EAAE,sBAAsB;wBACvC,WAAW,EAAE,sBAAsB;wBACnC,WAAW,EAAE,KAAK;wBAClB,UAAU,EAAE,SAAS;wBACrB,gBAAgB,EAAE,oBAAoB;wBACtC,kBAAkB,EAAE,MAAM;wBAC1B,oBAAoB,EAAE,oBAAoB;wBAC1C,IAAI,EAAE,gBAAgB;qBACvB;oBACD;wBACE,KAAK,EAAE,KAAK;wBACZ,eAAe,EAAE,wBAAwB;wBACzC,WAAW,EAAE,wBAAwB;wBACrC,WAAW,EAAE,KAAK;wBAClB,UAAU,EAAE,wBAAwB;wBACpC,gBAAgB,EAAE,SAAS;wBAC3B,kBAAkB,EAAE,MAAM;wBAC1B,oBAAoB,EAAE,qBAAqB;wBAC3C,IAAI,EAAE,aAAa;qBACpB;iBACF;aACF;YACD,aAAa;YACb,IAAI,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,aAAa,CAAC;YACzD,IAAI,qBAAqB,GAAG,CAAC,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;YACzE,aAAa;YACb,IAAI,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,YAAY,CAAC;YAE/D,IAAI,sBAAsB,GAAG;gBAC3B,UAAU,EAAE,IAAI;gBAChB,mBAAmB,EAAE,KAAK;gBAC1B,MAAM,EAAE;oBACN,KAAK,EAAE,CAAC;4BACN,OAAO,EAAE,IAAI;yBACd,CAAC;oBACF,KAAK,EAAE,CAAC;4BACN,OAAO,EAAE,IAAI;yBACd,CAAC;iBACH;aACF;YAED,IAAI,eAAe,GAAG,IAAI,KAAK,CAAC,qBAAqB,EAAE;gBACrD,IAAI,EAAE,KAAK;gBACX,IAAI,EAAE,mBAAmB;gBACzB,OAAO,EAAE,sBAAsB;aAChC,CAAC;QACJ,CAAC;KAAA;IAED,uBAAuB,CAAC,KAAa,EAAE,IAAY;QACjD,OAAO,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;IACpF,CAAC;IAED,oBAAoB,CAAC,KAAa,EAAE,IAAY;QAC9C,OAAO,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;IACtE,CAAC;CAEF;;YAlFoC,2EAAa;YACN,mGAAoB;;AAJnD,cAAc;IAL1B,+DAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,yNAAqC;;KAEtC,CAAC;GACW,cAAc,CAqF1B;AArF0B;;;;;;;;;;;;;;;;;;;;ACZc;AACqB;AACd;AAKhD,MAAM,OAAO,GAAG,GAAG,qEAAW,CAAC,MAAM,EAAE;AAKvC,IAAa,oBAAoB,GAAjC,MAAa,oBAAoB;IAE/B,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IACpC,CAAC;IAED,mBAAmB;QACjB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAkB,OAAO,GAAG,iBAAiB,CAAC,CAAC;IACrE,CAAC;IAED,mBAAmB,CAAC,SAAwB;QAC1C,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAgB,OAAO,GAAG,iBAAiB,EAAE,SAAS,CAAC,CAAC;IAC/E,CAAC;IAED,gBAAgB,CAAC,EAAU;QACzB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAgB,OAAO,GAAG,mBAAmB,EAAE,EAAE,CAAC;IACxE,CAAC;IAED,mBAAmB,CAAC,EAAU,EAAE,SAAwB;QACtD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAgB,OAAO,GAAG,mBAAmB,EAAE,EAAE,EAAE,SAAS,CAAC;IACnF,CAAC;IAED,mBAAmB,CAAC,EAAU;QAC5B,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAgB,OAAO,GAAG,mBAAmB,EAAE,EAAE,CAAC,CAAC;IAC5E,CAAC;IAED,yBAAyB,CAAC,EAAU;QAClC,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAwB,OAAO,GAAG,mBAAmB,EAAE,EAAE,GAAG,yBAAyB,CAAC;IAC5G,CAAC;IAED,uBAAuB,CAAC,KAAa,EAAE,IAAY;QACjD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAS,OAAO,GAAG,oCAAoC,GAAG,KAAK,GAAG,QAAQ,GAAG,IAAI,CAAC,CAAC;IACzG,CAAC;CACF;;YA9B2B,+DAAU;;AAFzB,oBAAoB;IAHhC,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,oBAAoB,CAgChC;AAhCgC","file":"admin-admin-module-es2015.js","sourcesContent":["export default \"<section class=\\\"content-header\\\">\\n  <div class=\\\"container-fluid\\\">\\n    <div class=\\\"row mb-2\\\">\\n      <div class=\\\"col-sm-6\\\">\\n        <h1>Biểu đồ thu chi</h1>\\n      </div>\\n      <div class=\\\"col-sm-6\\\">\\n        <ol class=\\\"breadcrumb float-sm-right\\\">\\n          <li class=\\\"breadcrumb-item\\\"><a routerLink=\\\"/admin\\\">Trang chủ</a></li>\\n          <li class=\\\"breadcrumb-item active\\\">Biểu đồ thu chi</li>\\n        </ol>\\n      </div>\\n    </div>\\n  </div><!-- /.container-fluid -->\\n</section>\\n<section class=\\\"content\\\">\\n  <div class=\\\"card\\\">\\n    <div class=\\\"card-header\\\">\\n      <h3 class=\\\"card-title\\\">Biểu đồ thu chi năm {{currentYear}}</h3>\\n    </div>\\n    <div class=\\\"card-body\\\">\\n      <div class=\\\"chart\\\">\\n        <canvas id=\\\"stackedBarChart\\\"\\n                style=\\\"min-height: 700px; height: 700px; max-height: 700px; max-width: 100%;\\\"></canvas>\\n      </div>\\n    </div>\\n  </div>\\n</section>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport {ChartComponent} from './chart/chart.component';\nimport {AdminAuthGuard} from '../helper/admin-auth-guard';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChartComponent\n  },\n  {\n    path: 'product',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./product/product.module').then(module => module.ProductModule)\n  },\n  {\n    path: 'category',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./category/category.module').then(module => module.CategoryModule)\n  },\n  {\n    path: 'warehouse',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./warehouse/warehouse.module').then(module => module.WarehouseModule)\n  },\n  {\n    path: 'warehouse-bill',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./warehouse-bill/warehouse-bill.module').then(module => module.WarehouseBillModule)\n  },\n  {\n    path: 'orders',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./orders/orders.module').then(module => module.OrdersModule)\n  },\n  {\n    path: 'messenger',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./admin-chat/admin-chat.module').then(module => module.AdminChatModule)\n  },\n  {\n    path: 'bills',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./bill/bill.module').then(module => module.BillModule)\n  },\n  {\n    path: 'users',\n    canActivateChild: [AdminAuthGuard],\n    loadChildren: () => import('./user/user.module').then(module => module.UserModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AdminRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AdminRoutingModule } from './admin-routing.module';\nimport {ChartComponent} from './chart/chart.component';\n\n\n@NgModule({\n  declarations: [\n    ChartComponent\n  ],\n  imports: [\n    CommonModule,\n    AdminRoutingModule,\n  ]\n})\nexport class AdminModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluL2NoYXJ0L2NoYXJ0LmNvbXBvbmVudC5zY3NzIn0= */\"","import {Component, OnInit} from '@angular/core';\nimport {OrdersService} from \"../../service/order/orders.service\";\nimport {WarehouseBillService} from \"../../service/warehouse-bill/warehouse-bill.service\";\n\ndeclare var $: any;\ndeclare var Chart: any;\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: './chart.component.html',\n  styleUrls: ['./chart.component.scss']\n})\nexport class ChartComponent implements OnInit {\n  currentYear: number;\n\n  constructor(private ordersService: OrdersService,\n              private warehouseBillService: WarehouseBillService) {\n  }\n\n  async ngOnInit() {\n    this.currentYear = new Date().getFullYear();\n    let monthTotalBought = [];\n    let monthTotalGet = [];\n    for (let i = 0; i < 12; i++) {\n      let totalSpendByBought = await this.sumTotalPriceHaveBought(i + 1, this.currentYear);\n      let totalGetByMonth = await this.sumTotalPriceHaveGot(i + 1, this.currentYear);\n      if (totalSpendByBought == null) {\n        totalSpendByBought = 0;\n      }\n      if (totalGetByMonth == null) {\n        totalGetByMonth = 0;\n      }\n      monthTotalBought.push(totalSpendByBought);\n      monthTotalGet.push(totalGetByMonth);\n    }\n    let areaChartData = {\n      labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8',\n        'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12',],\n      datasets: [\n        {\n          label: 'Chi',\n          backgroundColor: 'rgba(60,141,188,0.9)',\n          borderColor: 'rgba(60,141,188,0.8)',\n          pointRadius: false,\n          pointColor: '#3b8bba',\n          pointStrokeColor: 'rgba(60,141,188,1)',\n          pointHighlightFill: '#fff',\n          pointHighlightStroke: 'rgba(60,141,188,1)',\n          data: monthTotalBought\n        },\n        {\n          label: 'Thu',\n          backgroundColor: 'rgba(210, 214, 222, 1)',\n          borderColor: 'rgba(210, 214, 222, 1)',\n          pointRadius: false,\n          pointColor: 'rgba(210, 214, 222, 1)',\n          pointStrokeColor: '#c1c7d1',\n          pointHighlightFill: '#fff',\n          pointHighlightStroke: 'rgba(220,220,220,1)',\n          data: monthTotalGet\n        },\n      ]\n    }\n    // @ts-ignore\n    let barChartData = jQuery.extend(true, {}, areaChartData)\n    let stackedBarChartCanvas = $('#stackedBarChart').get(0).getContext('2d')\n    // @ts-ignore\n    let stackedBarChartData = jQuery.extend(true, {}, barChartData)\n\n    let stackedBarChartOptions = {\n      responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        xAxes: [{\n          stacked: true,\n        }],\n        yAxes: [{\n          stacked: true\n        }]\n      }\n    }\n\n    let stackedBarChart = new Chart(stackedBarChartCanvas, {\n      type: 'bar',\n      data: stackedBarChartData,\n      options: stackedBarChartOptions\n    })\n  }\n\n  sumTotalPriceHaveBought(month: number, year: number) {\n    return this.warehouseBillService.sumTotalPriceHaveBought(month, year).toPromise();\n  }\n\n  sumTotalPriceHaveGot(month: number, year: number) {\n    return this.ordersService.sumTotalPriceGet(month, year).toPromise();\n  }\n\n}\n","import {Injectable} from '@angular/core';\nimport {environment} from \"../../../environments/environment\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Observable} from \"rxjs\";\nimport {WarehouseBill} from \"../../model/warehouse-bill\";\nimport {WarehouseBillDetail} from \"../../model/warehouse-bill-detail\";\n\nconst API_URL = `${environment.apiUrl}`\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WarehouseBillService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  getAllWarehouseBill(): Observable<WarehouseBill[]> {\n    return this.http.get<WarehouseBill[]>(API_URL + '/warehousebills');\n  }\n\n  createWarehouseBill(warehouse: WarehouseBill): Observable<WarehouseBill> {\n    return this.http.post<WarehouseBill>(API_URL + '/warehousebills', warehouse);\n  }\n\n  getWarehouseBill(id: number): Observable<WarehouseBill> {\n    return this.http.get<WarehouseBill>(API_URL + `/warehousebills/${id}`)\n  }\n\n  updateWarehouseBill(id: number, warehouse: WarehouseBill): Observable<WarehouseBill> {\n    return this.http.put<WarehouseBill>(API_URL + `/warehousebills/${id}`, warehouse)\n  }\n\n  deleteWarehouseBill(id: number): Observable<WarehouseBill> {\n    return this.http.delete<WarehouseBill>(API_URL + `/warehousebills/${id}`);\n  }\n\n  getAllWarehouseBillDetail(id: number): Observable<WarehouseBillDetail[]> {\n    return this.http.get<WarehouseBillDetail[]>(API_URL + `/warehousebills/${id}` + `/warehouse-bill-details`)\n  }\n\n  sumTotalPriceHaveBought(month: number, year: number): Observable<number> {\n    return this.http.get<number>(API_URL + `/warehousebills/total-price?month=` + month + '&year=' + year);\n  }\n}\n"],"sourceRoot":"webpack:///"}